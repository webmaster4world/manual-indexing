var isEE=(navigator.userAgent.indexOf("MSIE")!=false);var AWAdvancedReportsColumns=Class.create();AWAdvancedReportsColumns.prototype={initialize:function(){this.columns=new Array();this.activeOverlayId=null;this.focusedElementId=null;document.observe("dom:loaded",(function(a){$$(".aw-column").each((function(b){b.observe("mouseout",(function(c){this.hideOverlay()}).bind(this))}).bind(this));$$(".aw-column").each((function(b){b.observe("mouseover",(function(d){var c=this.findColumnId(d.target);if(c){if(this.focusedElementId){if(this.focusedElementId==("aw-column-header-"+c)){return false}}this.showOverlay(c)}}).bind(this))}).bind(this));$$(".aw-column").each((function(b){b.observe("mousemove",(function(d){var c=this.findColumnId(d.target);if(c){if($("aw-column-header-"+c)){if(this.isAtInput(d)){$("aw-column-header-"+c).addClassName("over")}else{$("aw-column-header-"+c).removeClassName("over")}}}}).bind(this))}).bind(this));$$("input.text").each((function(b){b.observe("mouseover",(function(d){var c=this.findColumnId(d.target);if(c){this.hideOverlay()}}).bind(this))}).bind(this));$$(".aw-column-overlay").each((function(b){b.observe("click",(function(d){var c=this.findColumnId(d.target);if(c){if(this.isAtInput(d)){this.hideOverlay();if($("aw-column-header-"+c)){this.hideOverlay();$("aw-column-header-"+c).focus();this.focusedElementId="aw-column-header-"+c}}else{this.checkBox(this.findColumnId(d.target))}}}).bind(this))}).bind(this));$$("input.text").each((function(b){b.observe("blur",(function(c){this.focusedElementId=null}).bind(this))}).bind(this));$$("input.text").each((function(b){b.observe("change",(function(c){this.changeText(this.findColumnId(c.target),c.target.value)}).bind(this))}).bind(this))}).bind(this))},findColumnId:function(a){if(typeof(a)=="object"){var b=a;while(!$(b).hasClassName("aw-column")){b=b.parentNode}return b.id}},showOverlay:function(b){var a="overlay-"+b;if(this.activeOverlayId){if(this.activeOverlayId!=a){if($(this.activeOverlayId)){$(this.activeOverlayId).removeClassName("show")}this.activeOverlayId=a}}this.activeOverlayId=a;if($(a)){if(!$(a).hasClassName("show")){$(a).addClassName("show")}}if($("aw-header-"+b)){$("aw-header-"+b).addClassName("over")}},hideOverlay:function(){$$(".aw-column-overlay.show").each(function(a){$(a).removeClassName("show")});$$(".text-container input.text.over").each(function(a){$(a).removeClassName("over")});$$(".aw-header.over").each(function(a){$(a).removeClassName("over")});this.activeOverlayId=null},isAtInput:function(b){if(isIE){var a=b.offsetX;var c=b.offsetY}else{var a=b.layerX;var c=b.layerY}return((c>43)&&(c<55))},changeText:function(c,b){var a=this.columns[c];if(typeof(a)!="undefined"){a.custom_header=b;this.renderColumns()}},checkBox:function(b){var a=this.columns[b];if(typeof(a)!="undefined"){a.checked=a.checked?false:true;this.renderColumns()}},renderColumns:function(){var a=new Array();for(id in this.columns){var b=this.columns[id];if(typeof(b)!="undefined"){if(id==b.column_id){if($("aw-column-header-"+id)){$("aw-column-header-"+id).value=b.custom_header}if($("aw-column-checkbox-"+id)){$("aw-column-checkbox-"+id).checked=b.checked}}a.push(b)}}if($("custom_columns")){$("custom_columns").value=a.toJSON()}},registerColumn:function(c,b,a){this.columns[c]={column_id:c,custom_header:b,checked:a};return this}};;
